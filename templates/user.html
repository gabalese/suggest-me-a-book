<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">

    <meta http-equiv="cache-control" content="max-age=0"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT"/>
    <meta http-equiv="pragma" content="no-cache"/>

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Home page for {{ user.username }}</title>
</head>
<body>
<div class="container">
    <div class="page-header">
        <h1>This is {{ user.username }} homepage</h1>
    </div>
    <div class="row userdata">
        <h2>This user follows:</h2>
        <ul>
            {% for user in user.users_followed %}
                <li>{{ user.username }}</li>
                <ul>
                    {% for book in user.books_read %}
                        {{ book.title }} ({{ book.score }}){% if not loop.last %}->{% endif %}
                    {% else %}
                        <em>The user didn't read anything yet</em>
                    {% endfor %}
                </ul>
            {% else %}
                <em>You're not following anyone</em>
            {% endfor %}
        </ul>
    </div>
    <div class="row bookdata">
        <h2>Books I've read</h2>
        <ul>
            {% for book in user.books_read %}
                {{ book.title }} ({{ book.score }}) {% if not loop.last %}->{% endif %}
            {% else %}
                <em>You didn't read anything yet</em>
            {% endfor %}
        </ul>
    </div>
    <div class="row suggestedbooks">
        <h2>Books you could find interesting to read</h2>
        <ul>
            {% for each_book in allbooks %}
                <li>
                    <a href="/book/{{ each_book.isbn }}">{{ each_book.title }}</a>
                    <a href="{{ user.username }}/read/{{ each_book.isbn }}">[read this]</a>

                    <a href="{{ user.username }}/rate/{{ each_book.isbn }}/1">[1]</a>
                    <a href="{{ user.username }}/rate/{{ each_book.isbn }}/2">[2]</a>
                    <a href="{{ user.username }}/rate/{{ each_book.isbn }}/3">[3]</a>
                    <a href="{{ user.username }}/rate/{{ each_book.isbn }}/4">[4]</a>
                    <a href="{{ user.username }}/rate/{{ each_book.isbn }}/5">[5]</a>


                </li>
            {% endfor %}
        </ul>
    </div>
    <div class="row suggestedusers">
        <h2>Users you might be interested in</h2>
        <ul>
            {% for each_user in allusers %}
                <li><a href="{{ user.username }}/follow/{{ each_user.username }}">{{ each_user.username }}</a></li>
            {% endfor %}
        </ul>
    </div>
</div>
</body>
</html>
